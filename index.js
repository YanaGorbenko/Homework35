(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function c(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(t){if(t.ep)return;t.ep=!0;const o=c(t);fetch(t.href,o)}})();const g=axios.create({baseURL:"https://6971cf4a32c6bacb12c49096.mockapi.io"});let m=1,T="",F="asc";const D=document.getElementById("root"),O=document.createElement("h1");O.textContent="Список книг";D.prepend(O);const M=document.createElement("div");M.className="books-container";D.appendChild(M);const u=document.createElement("div");u.className="list-container";M.appendChild(u);const d=document.createElement("ul");d.className="book-list";u.appendChild(d);const r=document.createElement("div");r.className="book-info";M.appendChild(r);const y=document.createElement("button");y.className="all-books-button";y.textContent="Показати всі книги";u.prepend(y);y.style.display="none";const v=document.createElement("select");u.prepend(v);v.style.display="none";const w=document.createElement("option");w.value="asc";w.textContent="В алфавітному порядку";v.appendChild(w);const H=document.createElement("option");H.value="desc";H.textContent="Проти алфавітного порядку";v.appendChild(H);const h=document.createElement("form");h.className="searchForm";u.prepend(h);h.style.display="none";const L=document.createElement("input");L.type="text";L.name="search";h.appendChild(L);const I=document.createElement("button");I.className="search-button";I.textContent="Пошук";h.appendChild(I);const f=document.createElement("button");f.className="paginattion-button";f.textContent="Показати ще";u.appendChild(f);f.style.display="none";async function b(){try{N("Завантаження...",d);const{data:e}=await g.get("/books",{params:{page:m,limit:5,search:T,sortby:"title",order:F}});u.querySelector(".loader").remove(),V(e)}catch(e){console.error("Помилка при завантаженні книг:",e)}}const B=document.createElement("button");B.className="new-book-button";B.textContent="Додати нову книгу";u.appendChild(B);async function V(e){e.forEach(n=>{const c=document.createElement("li");c.className="list-item",d.appendChild(c);const l=document.createElement("p");l.className="book-title",l.textContent=n.title,c.appendChild(l);const t=document.createElement("div");t.className="buttons-container",c.appendChild(t);const o=document.createElement("button");o.className="book-button",o.textContent="Переглянути деталі",t.appendChild(o);const s=document.createElement("button");s.className="delete-button",s.textContent="Видалити",t.appendChild(s);const i=document.createElement("button");i.className="editing-button",i.textContent="Редагувати",t.appendChild(i),h.style.display="inline",f.style.display="none",v.style.display="inline",e.length===5?f.style.display="inline":e.length<5&&m!==1&&j(),o.addEventListener("click",()=>{$(n.id)}),s.addEventListener("click",()=>{S(n.id)}),i.addEventListener("click",()=>{Y(n.id)})})}function N(e,n){const c=document.createElement("p");c.className="loader",c.textContent=e,n.appendChild(c)}async function $(e){r.innerHTML="",N("Завантаження...",r);try{const{data:n}=await g.get(`/books/${e}`);r.innerHTML="";const c=document.createElement("h2");c.className="book-title",c.textContent=n.title,r.appendChild(c);const l=document.createElement("p");l.className="book-author",l.textContent="Автор: "+n.author,r.appendChild(l);const t=document.createElement("p");t.className="book-year",t.textContent="Рік видання: "+n.year,r.appendChild(t);const o=document.createElement("p");o.className="book-dexcription",o.textContent=n.description,r.appendChild(o)}catch(n){console.error("Помилка при завантаженні книг:",n)}}function P(e="",n="",c="",l=""){r.innerHTML="";const t=document.createElement("form");t.className="form",r.appendChild(t);const o=document.createElement("label");o.className="form-label",o.textContent="Введіть назву книги",o.htmlFor="title",t.appendChild(o);const s=document.createElement("input");s.type="text",s.id="title",s.name="title",s.value=e,t.appendChild(s);const i=document.createElement("label");i.className="form-label",i.textContent="Введіть автора книги",i.htmlFor="author",t.appendChild(i);const a=document.createElement("input");a.type="text",a.id="author",a.name="author",a.value=n,t.appendChild(a);const C=document.createElement("label");C.className="form-label",C.textContent="Введіть рік видання книги",C.htmlFor="year",t.appendChild(C);const p=document.createElement("input");p.type="text",p.id="year",p.name="year",p.value=c,t.appendChild(p);const x=document.createElement("label");x.className="form-label",x.textContent="Введіть опис книги:",x.htmlFor="description",t.appendChild(x);const E=document.createElement("textarea");E.id="description",E.name="description",E.rows=4,E.value=l,t.appendChild(E);const k=document.createElement("button");return k.className="submit-button",k.textContent="Відправити",t.appendChild(k),{form:t,titleInput:s,authorInput:a,yearInput:p,descriptionInput:E,submitButton:k}}function A(e,n,c,l,t){e.querySelectorAll(".error-message").forEach(a=>a.remove());let s=!0;if(!n.value.trim()){const a=document.createElement("p");a.textContent="Назва книги має бути введена",a.className="error-message",e.insertBefore(a,n),s=!1}if(!c.value.trim()){const a=document.createElement("p");a.textContent="Автор книги має бути введений",a.className="error-message",e.insertBefore(a,c),s=!1}const i=l.value.trim();if(i){if(isNaN(i)||!Number.isInteger(Number(i))){const a=document.createElement("p");a.textContent="Рік видання має бути числом",a.className="error-message",e.insertBefore(a,l),s=!1}}else{const a=document.createElement("p");a.textContent="Рік видання книги має бути введений",a.className="error-message",e.insertBefore(a,l),s=!1}if(!t.value.trim()){const a=document.createElement("p");a.textContent="Опис книги має бути введений",a.className="error-message",e.insertBefore(a,t),s=!1}return s}function q(){const{form:e,titleInput:n,authorInput:c,yearInput:l,descriptionInput:t}=P();e.addEventListener("submit",async o=>{if(o.preventDefault(),A(e,n,c,l,t)){r.innerHTML="",N("Додавання нової книги...",r);try{const i={title:n.value.trim(),author:c.value.trim(),year:parseInt(l.value.trim()),description:t.value.trim()};await g.post("/books",i),m=1,d.innerHTML="",await b(),R()}catch(i){console.error("Помилка при додаванні нової книги:",i)}}})}async function S(e){r.innerHTML="",N("Видалення книги...",r);try{await g.delete(`/books/${e}`),m=1,d.innerHTML="",await b(),K()}catch(n){console.error("Помилка при видаленні книги:",n)}}async function Y(e){try{const{data:n}=await g.get(`/books/${e}`),{form:c,titleInput:l,authorInput:t,yearInput:o,descriptionInput:s}=P(n.title,n.author,n.year,n.description);c.addEventListener("submit",async i=>{if(i.preventDefault(),A(c,l,t,o,s)){const C={title:l.value.trim(),author:t.value.trim(),year:parseInt(o.value.trim()),description:s.value.trim()};try{r.innerHTML="",N("Редагування книги...",r),await g.put(`/books/${e}`,C),m=1,d.innerHTML="",await b(),U()}catch(p){console.log(p)}}})}catch(n){console.error("Помилка при редагуванні книги:",n)}}function K(){r.innerHTML="",setTimeout(()=>{const e=document.createElement("p");e.className="message",e.textContent="Вітаю! Книга була успішно видалена зі списку)",r.appendChild(e)},1e3),setTimeout(()=>{r.innerHTML=""},3e3)}function R(){r.innerHTML="";const e=document.createElement("p");e.className="message",e.textContent="Вітаю! Книга була успішно додана до списку)",r.appendChild(e)}function U(){r.innerHTML="";const e=document.createElement("p");e.className="message",e.textContent="Вітаю! Книга була успішно відредагована)",r.appendChild(e)}function j(){r.innerHTML="";const e=document.createElement("p");e.className="book-title",e.textContent="Кінець списку",r.appendChild(e)}f.addEventListener("click",async()=>{f.style.display="none",m+=1,b()});B.addEventListener("click",q);h.addEventListener("submit",async e=>{e.preventDefault(),T=L.value.trim(),m=1,d.innerHTML="",L.value="",h.reset(),y.style.display="inline",await b()});y.addEventListener("click",async()=>{d.innerHTML="",m=1,T="",await b(),r.innerHTML="",y.style.display="none"});v.addEventListener("change",async e=>{e.preventDefault(),F=e.target.value,d.innerHTML="",m=1,await b()});document.addEventListener("DOMContentLoaded",async()=>{await b(),console.log("Книги завантажені:")});
//# sourceMappingURL=index.js.map
